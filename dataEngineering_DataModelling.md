# Data Modelling

- ER diagrams are usually designed by database engineers.

## Data Warehousing

- It is used for reads.
- Used for analytical queries to derive patterns.
- Data is structured.
- Denormalization does occur.

### OLAP

- OLAP is used for data warehousing.
  - It is a tool used for storing huge amounts of data in a structured form.
- OLAP can hold data for more than 5 years.

### Dimensional Modelling

There are two types of tables:

1. **Fact table**
2. **Dimension table**

#### Fact Tables

- This is where core data is stored.
- Contains business metrics that can be evaluated.
- Contains numerical data.
- Contains foreign keys from other tables.

**Examples:**

- In E-commerce: `Sales` table
- In Healthcare: `PatientVisit` table

#### Dimension Tables

- They contain descriptive information.

**Examples:**

- In E-commerce: `Product`, `Customer`

### Schema Designs

3 types:

1. **Star schema**
2. **Snowflake schema**
3. **Galaxy schema**

#### Star Schema (Just do it)

- Simple and intuitive choice.
- Only one fact table.
- Can have multiple dimension tables.
- **Advantages:**
  - Easy to understand.
  - Fast performance.
- **Disadvantages:**
  - Redundancy might exist in dimension tables.

#### Snowflake Schema (When you need more normalization)

- 1 fact table.
- Multiple dimension tables.
- More joins are involved.

#### Galaxy Schema

- Many fact tables.
- Shared dimension tables.

### Slowly changing dimensions

- They are dimensions that change over time
  - Example a customer who's address changed. 

The Different types of SCD:

- SCD type 0
- SCD type 1
- SCD type 2
- SCD type 3
- SCD type 4
- SCD type 6

#### SCD type 0

- you dont do much when data changes. perhaps the data is a Date of birth.

#### SCD type 1

- you overwrite the field. for example if the customer changes its phone number

#### SCD type 2

- you add a new record inside the table. 
- you must use a **surrogate key** if you want to keep track of item row being unique
- downside: violation of DRY

Note: the **surrogate key** is an artificial unique identifier generated by the system . It is very similar to the row_number feature 

#### SCD type 3

- you add a column with the previous value
- downside: no historacle data

#### SCD type 4

- using a historacle table.
- downside: more complexity (joins), duplicates


#### SCD type 6

- using SC1+SC2+SC3 together
- downside: complexity 